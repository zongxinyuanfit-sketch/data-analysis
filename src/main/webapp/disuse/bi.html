<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>BI看板</title>
    <meta name="description" content="描述"/>
    <meta name="keywords" content="关键字"/>
    <link rel="shortcut icon" href="../znysbi/images/favicon.ico">
    <link rel="stylesheet" type="text/css" media="all" href="../znysbi/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" media="all" href="../znysbi/css/daterangepicker-bs3.css"/>
    <link rel="stylesheet" type="text/css" media="all" href="../znysbi/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../znysbi/css/index.css"/>
    <link rel="stylesheet" href="../css/toast/toastr.css"/>
    <script src="https://pub.120askimages.com/common/js/jquery-3.min.js	"></script>
    <script type="text/javascript" src="../znysbi/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../znysbi/js/moment.js"></script>
    <script type="text/javascript" src="../znysbi/js/daterangepicker.js"></script>
    <script type="text/javascript" src="../znysbi/js/echarts.min.js"></script>
    <script type="text/javascript" src="../znysbi/js/dataparser/getdata.js"></script>
    <script type="text/javascript" src="../znysbi/js/dataparser/parserdata.js"></script>
    <script type="text/javascript" src="../js/toast/toastr.js"></script>
</head>

<body>
<div class="statistics_top">
    <h1>智能医生数据大屏</h1>
    <div class="date_time"></div>
    <div class="area"><img src="../znysbi/images/mapico.png"><em>珠海</em></div>
    <div class="checkdate">
        <span class="tab" onclick="getToast('','',0)">实时</span>
        <div class="inp">
            <input type="text" id="config-demo" class="form-control">
            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
        </div>
    </div>
</div>
<div class="rowWrap b_flex">
    <div class="viewbox_one b_flex">
        <div class="viewbox1">
            <div class="viewbox" id="shitu1"></div>
        </div>
        <div class="viewbox2">
            <div class="viewbox" id="shitu2"></div>
        </div>
        <div class="viewbox3">
            <div class="viewbox" id="shitu3"></div>
        </div>
    </div>
    <div class="viewbox_two b_flex">
        <div class="viewbox1">
            <div class="viewbox" id="shitu4"></div>
        </div>
        <div class="viewbox2">
            <div class="viewbox" id="shitu5"></div>
        </div>
    </div>
    <div class="viewbox_three b_flex">
        <div class="viewbox1">
            <div class="viewbox" id="shitu6"></div>
        </div>
        <div class="viewbox2">
            <div class="viewbox" id="shitu7"></div>
        </div>
    </div>
</div>


<script type="text/javascript">
    let myDate = new Date();
    let year = myDate.getFullYear();//获取年
    let month = myDate.getMonth() + 1;//获取月，默认从0开始，所以要加一
    let date = myDate.getDate();//获取日
    let hours = myDate.getHours();//获取小时
    let minutes = myDate.getMinutes();//获取分
    let seconds = myDate.getSeconds();//获取秒
    let weekend = myDate.getDay(); //获取星期几，这里获得到的是数字1-7，所以我下面自己new了一个数组把获取到的数字当下标
    let weeks = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
    let day = weeks[weekend]//这样就是显示的星期x了
    //这些if判断是在小于10的时候前面自动补0
    if (month < 10) {
        month = '0' + month
    }
    if (date < 10) {
        date = '0' + date
    }
    if (hours < 10) {
        hours = '0' + hours
    }
    if (minutes < 10) {
        minutes = '0' + minutes
    }
    if (seconds < 10) {
        seconds = '0' + seconds
    }
    ;
    $('.date_time').append("<span class='hours'>" + hours + ":" + minutes + ":" + seconds + "</span>");
    $('.date_time').append("<span class='year'>" + year + "年" + month + "月" + date + "日</span>" + "<br/>");
    $('.date_time').append("<span class='day'>" + day + "</span>")
    $(function () {
        setInterval("changeTime();", 1000); //每隔一秒运行一次
    })

    function changeTime() {
        myDate = new Date();
        year = myDate.getFullYear();
        month = myDate.getMonth() + 1;
        date = myDate.getDate();
        hours = myDate.getHours();
        minutes = myDate.getMinutes();
        seconds = myDate.getSeconds();
        weekend = myDate.getDay();
        weeks = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
        day = weeks[weekend]
        if (month < 10) {
            month = '0' + month
        }
        if (date < 10) {
            date = '0' + date
        }
        if (hours < 10) {
            hours = '0' + hours
        }
        if (minutes < 10) {
            minutes = '0' + minutes
        }
        if (seconds < 10) {
            seconds = '0' + seconds
        }
        //这里替换第一次加载的数据
        $('.year').html(year + "年" + month + "月" + date + "日")
        $('.hours').html(hours + ":" + minutes + ":" + seconds)
        $('.day').html(day)
    }

    $(document).ready(function () {

        $('#config-text').keyup(function () {
            eval($(this).val());
        });

        $('.configurator input, .configurator select').change(function () {
            updateConfig();
        });

        $('.demo i').click(function () {
            $(this).parent().find('input').click();
        });

        $('#startDate').daterangepicker({
            singleDatePicker: true,
            startDate: moment().subtract(6, 'days')
        });

        $('#endDate').daterangepicker({
            singleDatePicker: true,
            startDate: moment()
        });

        updateConfig();

        function updateConfig() {
            var options = {
                minDate:'2021-02-21'
            };
            $('#config-demo').val(addDate(getNowFormatDate(),-1)+' - '+addDate(getNowFormatDate(),-1));
            $('#config-demo').daterangepicker(options, function (start, end, label) {
                getToast(start.format('YYYY-MM-DD'),end.format('YYYY-MM-DD'),1);
                // console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
            });

        }
        getToast('','',0);

    });
</script>
</body>
</html>
